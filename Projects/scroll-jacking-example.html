<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>CodePen - Example Scroll Jacking</title>
    <link href="../Resources/CSS/scroll-jack-test.css" type="text/css" rel="stylesheet">
</head>
<body>
    
    <div class="navigation">
        <div class="dot current-dot" data-index="0"></div>
        <div class="dot" data-index="1"></div>
        <div class="dot" data-index="2"></div>
        <div class="dot" data-index="3"></div>
        <div class="dot" data-index="4"></div>
    </div>
    <div class="sections" style="top: -400vh;">
        <div class="section" data-index="0" style="background-color: rgb(223, 172, 154);">
            <h2>Section: 1</h2>
            <p>Hamburger sirloin pancetta sausage meatloaf, prosciutto tongue officia jowl qui alcatra esse. Fugiat bacon dolor short ribs in beef ribs pariatur. Officia tail deserunt, filet mignon lorem sint fugiat bacon sausage. Nisi ad dolore tempor pork ut adipisicing reprehenderit.</p>
        </div>
        <div class="section" data-index="1" id="about "style="background-color: rgb(230, 223, 137);">
            <h2>Section: 2</h2>
            <p>Picanha chuck shankle sunt proident turkey, dolore ullamco. Nulla commodo minim officia ground round. Sirloin eu cupidatat ipsum consectetur. Alcatra qui magna fatback picanha, ipsum mollit strip steak deserunt capicola turkey turducken corned beef pancetta.</p>
        </div>
        <div class="section" data-index="2" style="background-color: rgb(173, 224, 143);">
            <h2>Section: 3</h2>
            <p>Shankle tenderloin alcatra landjaeger beef ribs commodo, bacon jerky porchetta jowl occaecat laborum brisket. Landjaeger labore aliquip, swine burgdoggen dolore strip steak shankle. Pork belly minim ut bacon ullamco duis pork loin, meatball culpa cupidatat filet mignon pariatur meatloaf enim aute. Filet mignon salami ullamco, dolore biltong adipisicing brisket picanha in nulla qui.</p>
        </div>
        <div class="section" data-index="3" style="background-color: rgb(128, 223, 218);">
            <h2>Section: 4</h2>
            <p>Prosciutto capicola shoulder flank doner ham hock chislic lorem. Corned beef hamburger drumstick est pancetta frankfurter beef ribs ut kielbasa. Prosciutto sunt nisi exercitation culpa, bresaola mollit aliquip meatloaf aute chislic. Excepteur flank elit pig, leberkas pariatur beef sausage t-bone.</p>
        </div>
        <div class="section" data-index="4" style="background-color: rgb(150, 170, 224);">
            <h2>Section: 5</h2>
            <p>Boudin ullamco ea chuck ex salami strip steak adipisicing veniam in pork belly. Meatloaf lorem nulla consequat. Velit ut swine cillum cupim flank occaecat boudin in irure prosciutto elit consectetur esse. Salami shank excepteur occaecat laborum fugiat irure elit ea shoulder meatball pork chop pig ground round.</p>
        </div>
    </div>
    <!-- partial -->
    <script>
        const dots             = document.querySelectorAll('.dot');
        const sections         = document.querySelectorAll('.section');
        const sectionContainer = document.querySelector('.sections');
        const loader           = document.querySelector('#js-loader');

        // For tracking the section currently displayed
        let currentSection = 0;
        let canScroll = true;

        // Touch data (for mobile)
        let touchStart = 0;
        let touchEnd = 0;

        performScroll(0);
        // set event listeners on the dots
        dots.forEach((dot, index) => {
        dot.addEventListener('click', (event) => {
            resetDotIndicator();
            currentSection = index;
            sectionContainer.style.top = (currentSection * -100) + 'vh';
            setDotIndicator();
        });
        });

        document.addEventListener('touchstart', (event) => {
        touchStart = event.changedTouches[0].clientY;
        });

        document.addEventListener('touchend', (event) => {
        touchEnd = event.changedTouches[0].clientY;
        if (touchStart > touchEnd) {
            performScroll(1);
        } else {
            performScroll(-1);
        }
        });

        // Add event listener for scrolling, so we can do our scroll jacking
        document.addEventListener('wheel', (event) => {
        // Check if we can scroll yet, or if we're in the middle of a scroll jack.
        // If so, prevent all scrolling
        if (!canScroll) {
            return; 
        }
        
        // Not in a scroll, so set a timeout for when scrolling can happen next
        canScroll = false;
        setTimeout(() => {
            canScroll = true;
        }, 1000);
        
        // Perform the scroll to the next section
        // First, get the next section to scroll to by checking if the scroll position is greater or less than the position of the current position.
        scrollDir = event.deltaY > 1 ? 1 : -1;
        performScroll(scrollDir);
        });

        function performScroll(scrollDir) {
        resetDotIndicator();
        currentSection += scrollDir;
        
        // Make sure we stick to real sections and don't scroll out of it.
        if (currentSection >= sections.length - 1) {
            currentSection = sections.length - 1;
        }
        if (0 > currentSection) {
            currentSection = 0;
        }
        
        // perform the 'scroll'
        sectionContainer.style.top = (currentSection * -100) + 'vh';
        setDotIndicator();
        }

        // reset the old dot to not be active
        function resetDotIndicator() {
        dots[currentSection].classList.remove('current-dot');
        }

        // Set the current dot displayed
        function setDotIndicator() {
        dots[currentSection].classList.add('current-dot');
        }
    </script>
    
    
    
</body>